require('../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/goods/order_list/index"],{"0db4":function(t,e,s){"use strict";s.r(e);var n=s("cbae"),_=s("c931");for(var u in _)"default"!==u&&function(t){s.d(e,t,(function(){return _[t]}))}(u);s("1183");var a,i=s("f0c5"),p=Object(i["a"])(_["default"],n["b"],n["c"],!1,null,"28af197a",null,!1,n["a"],a);e["default"]=p.exports},1183:function(t,e,s){"use strict";var n=s("d2fe"),_=s.n(n);_.a},"97ce":function(t,e,s){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s("451d"),_=s("f984"),u=s("666f"),a=s("26cb"),i=p(s("66ca"));function p(t){return t&&t.__esModule?t:{default:t}}var r=function(){Promise.all([s.e("common/vendor"),s.e("components/home/index")]).then(function(){return resolve(s("03ff"))}.bind(null,s)).catch(s.oe)},o=function(){s.e("components/Authorize").then(function(){return resolve(s("b29f"))}.bind(null,s)).catch(s.oe)},l=function(){s.e("components/emptyPage").then(function(){return resolve(s("2baa"))}.bind(null,s)).catch(s.oe)},y={components:{home:r,emptyPage:l,authorize:o},mixins:[i.default],data:function(){return{loading:!1,loadend:!1,loadTitle:this.$t("加载更多"),orderList:[],orderData:{},orderStatus:9,page:1,limit:20,pay_close:!1,pay_order_id:"",totalPrice:"0",initIn:!1,isAuto:!1,isShowAuth:!1}},computed:(0,a.mapGetters)(["isLogin"]),onLoad:function(t){t.status&&(this.orderStatus=t.status),this.isLogin?(this.page=1,this.orderList=[],this.loadend=!1,this.pay_close=!1,this.onLoadFun(),this.getOrderList()):(0,u.toLogin)();var e=wx.getEnterOptionsSync();if("1038"==e.scene&&"wxef277996acc166c3"==e.referrerInfo.appId&&this.initIn){var s=e.referrerInfo.extraData;this.initIn=!1,s?"success"==s.code?this.getOrderList():s.code:this.getOrderList()}},methods:{onLoadFun:function(){this.getOrderData()},authColse:function(t){this.isShowAuth=t},onChangeFun:function(t){var e=t,s=e.action||null,n=void 0!=e.value?e.value:null;s&&this[s]&&this[s](n)},payClose:function(){this.pay_close=!1},getOrderData:function(){var t=this;(0,n.orderData)().then((function(e){t.$set(t,"orderData",e.data)}))},cancelOrder:function(t,e){var s=this;if(!e)return s.$util.Tips({title:s.$t("缺少订单号无法取消订单")});(0,n.orderCancel)(e).then((function(e){return s.$util.Tips({title:e.msg,icon:"success"},(function(){s.orderList.splice(t,1),s.$set(s,"orderList",s.orderList),s.$set(s.orderData,"unpaid_count",s.orderData.unpaid_count-1),s.getOrderData()}))})).catch((function(t){return s.$util.Tips({title:t})}))},goPay:function(e,s){t.navigateTo({url:"/pages/goods/cashier/index?order_id=".concat(s,"&from_type=order")})},goOrderDetails:function(e){var s=this;if(!e)return s.$util.Tips({title:s.$t("缺少订单号无法查看订单详情")});t.showLoading({title:s.$t("正在加载中")}),(0,_.openOrderSubscribe)().then((function(){t.hideLoading(),t.navigateTo({url:"/pages/goods/order_details/index?order_id="+e})})).catch((function(e){t.hideLoading()}))},statusClick:function(t){t!=this.orderStatus&&(this.orderStatus=t,this.loadend=!1,this.page=1,this.$set(this,"orderList",[]),this.getOrderList())},getOrderList:function(){var t=this;t.loadend||t.loading||(t.loading=!0,t.loadTitle=t.$t("加载更多"),(0,n.getOrderList)({type:t.orderStatus,page:t.page,limit:t.limit}).then((function(e){var s=e.data||[],n=s.length<t.limit;t.orderList=t.$util.SplitArray(s,t.orderList),t.$set(t,"orderList",t.orderList),t.loadend=n,t.loading=!1,t.loadTitle=n?t.$t("没有更多内容啦~"):t.$t("加载更多"),t.page=t.page+1})).catch((function(e){t.loading=!1,t.loadTitle=t.$t("加载更多")})))},delOrder:function(e,s){var _=this;t.showModal({title:_.$t("删除订单"),content:_.$t("确定删除该订单"),success:function(t){if(t.confirm)(0,n.orderDel)(e).then((function(t){return _.orderList.splice(s,1),_.$set(_,"orderList",_.orderList),_.$set(_.orderData,"unpaid_count",_.orderData.unpaid_count-1),_.getOrderData(),_.$util.Tips({title:_.$t("删除成功"),icon:"success"})})).catch((function(t){return _.$util.Tips({title:t})}));else if(t.cancel)return _.$util.Tips({title:_.$t("已取消")})}})}},onReachBottom:function(){this.getOrderList()},onPageScroll:function(e){t.$emit("scroll")}};e.default=y}).call(this,s("543d")["default"])},c931:function(t,e,s){"use strict";s.r(e);var n=s("97ce"),_=s.n(n);for(var u in n)"default"!==u&&function(t){s.d(e,t,(function(){return n[t]}))}(u);e["default"]=_.a},cbae:function(t,e,s){"use strict";s.d(e,"b",(function(){return _})),s.d(e,"c",(function(){return u})),s.d(e,"a",(function(){return n}));var n={easyLoadimage:function(){return Promise.all([s.e("common/vendor"),s.e("components/easy-loadimage/easy-loadimage")]).then(s.bind(null,"9362"))}},_=function(){var t=this,e=t.$createElement,s=(t._self._c,t.$t("订单信息")),n=t.$t("消费订单"),_=t.$t("总消费"),u=t.$t("￥"),a=t.$t("全部"),i=t.$t("待付款"),p=t.$t("待发货"),r=t.$t("待收货"),o=t.$t("待评价"),l=t.$t("共"),y=t.$t("件商品，总金额"),d=t.$t("￥"),c=t.$t("查看详情"),f=t.__map(t.orderList,(function(e,s){var n=t.__get_orig(e),_=2==e.type?t.$t("砍价"):null,u=2!=e.type&&3==e.type?t.$t("拼团"):null,a=2!=e.type&&3!=e.type&&1==e.type?t.$t("秒杀"):null,i=2!=e.type&&3!=e.type&&1!=e.type&&4==e.type?t.$t("预售"):null,p=9==e._status._type?t.$t("线下付款,未支付"):null,r=9!=e._status._type&&0==e._status._type?t.$t("待付款"):null,o=9!=e._status._type&&0!=e._status._type&&1==e._status._type&&1==e.shipping_type?t.$t("待发货"):null,l=9!=e._status._type&&0!=e._status._type&&1==e._status._type&&1==e.shipping_type&&e.refund.length&&e.is_all_refund?t.$t("退款中"):null,y=9!=e._status._type&&0!=e._status._type&&1==e._status._type&&1==e.shipping_type&&e.refund.length&&!e.is_all_refund?t.$t("部分退款中"):null,d=9==e._status._type||0==e._status._type||1==e._status._type&&1==e.shipping_type||1!=e._status._type||2!=e.shipping_type?null:t.$t("待核销"),c=9!=e._status._type&&0!=e._status._type&&(1!=e._status._type||1!=e.shipping_type)&&1==e._status._type&&2==e.shipping_type&&e.refund.length&&e.is_all_refund?t.$t("退款中"):null,f=9==e._status._type||0==e._status._type||1==e._status._type&&1==e.shipping_type||1!=e._status._type||2!=e.shipping_type||!e.refund.length||e.is_all_refund?null:t.$t("部分退款中"),h=9==e._status._type||0==e._status._type||1==e._status._type&&1==e.shipping_type||1==e._status._type&&2==e.shipping_type||2!=e._status._type?null:t.$t("待收货"),g=9==e._status._type||0==e._status._type||1==e._status._type&&1==e.shipping_type||1==e._status._type&&2==e.shipping_type||2!=e._status._type||!e.refund.length||!e.is_all_refund?null:t.$t("退款中"),m=9==e._status._type||0==e._status._type||1==e._status._type&&1==e.shipping_type||1==e._status._type&&2==e.shipping_type||2!=e._status._type||!e.refund.length||e.is_all_refund?null:t.$t("部分退款中"),$=9==e._status._type||0==e._status._type||1==e._status._type&&1==e.shipping_type||1==e._status._type&&2==e.shipping_type||2==e._status._type||3!=e._status._type?null:t.$t("待评价"),v=9==e._status._type||0==e._status._type||1==e._status._type&&1==e.shipping_type||1==e._status._type&&2==e.shipping_type||2==e._status._type||3!=e._status._type||!e.refund.length||!e.is_all_refund?null:t.$t("退款中"),L=9==e._status._type||0==e._status._type||1==e._status._type&&1==e.shipping_type||1==e._status._type&&2==e.shipping_type||2==e._status._type||3!=e._status._type||!e.refund.length||e.is_all_refund?null:t.$t("部分退款中"),b=9==e._status._type||0==e._status._type||1==e._status._type&&1==e.shipping_type||1==e._status._type&&2==e.shipping_type||2==e._status._type||3==e._status._type||4!=e._status._type?null:t.$t("已完成"),O=9==e._status._type||0==e._status._type||1==e._status._type&&1==e.shipping_type||1==e._status._type&&2==e.shipping_type||2==e._status._type||3==e._status._type||4!=e._status._type||!e.refund.length||!e.is_all_refund?null:t.$t("退款中"),D=9==e._status._type||0==e._status._type||1==e._status._type&&1==e.shipping_type||1==e._status._type&&2==e.shipping_type||2==e._status._type||3==e._status._type||4!=e._status._type||!e.refund.length||e.is_all_refund?null:t.$t("部分退款中"),I=9==e._status._type||0==e._status._type||1==e._status._type&&1==e.shipping_type||1==e._status._type&&2==e.shipping_type||2==e._status._type||3==e._status._type||4==e._status._type||5!=e._status._type||0!=e.status?null:t.$t("未核销"),T=9==e._status._type||0==e._status._type||1==e._status._type&&1==e.shipping_type||1==e._status._type&&2==e.shipping_type||2==e._status._type||3==e._status._type||4==e._status._type||5!=e._status._type||0!=e.status||!e.refund.length||!e.is_all_refund?null:t.$t("退款中"),P=9==e._status._type||0==e._status._type||1==e._status._type&&1==e.shipping_type||1==e._status._type&&2==e.shipping_type||2==e._status._type||3==e._status._type||4==e._status._type||5!=e._status._type||0!=e.status||!e.refund.length||e.is_all_refund?null:t.$t("部分退款中"),S=9==e._status._type||0==e._status._type||1==e._status._type&&1==e.shipping_type||1==e._status._type&&2==e.shipping_type||2==e._status._type||3==e._status._type||4==e._status._type||5==e._status._type&&0==e.status||-2!=e._status._type?null:t.$t("已退款"),w=t.__map(e.cartInfo,(function(s,n){var _=t.__get_orig(s),u=s.productInfo.attrInfo?t.$t("￥"):null,a=s.productInfo.attrInfo?null:t.$t("￥"),i=s.refund_num&&-2!=e._status._type?t.$t("件退款中"):null;return{$orig:_,m34:u,m35:a,m36:i}})),x=0==e._status._type||9==e._status._type?t.$t("取消订单"):null,A=0==e._status._type?t.$t("立即付款"):null,C=4==e._status._type?t.$t("删除订单"):null;return{$orig:n,m9:_,m10:u,m11:a,m12:i,m13:p,m14:r,m15:o,m16:l,m17:y,m18:d,m19:c,m20:f,m21:h,m22:g,m23:m,m24:$,m25:v,m26:L,m27:b,m28:O,m29:D,m30:I,m31:T,m32:P,m33:S,l0:w,m40:x,m41:A,m42:C}})),h=0!=t.orderList.length||t.loading?null:t.$t("暂无订单");t.$mp.data=Object.assign({},{$root:{m0:s,m1:n,m2:_,m3:u,m4:a,m5:i,m6:p,m7:r,m8:o,m37:l,m38:y,m39:d,m43:c,l1:f,m44:h}})},u=[]},d2fe:function(t,e,s){},f91a:function(t,e,s){"use strict";(function(t){s("248d");n(s("66fd"));var e=n(s("0db4"));function n(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=s,t(e.default)}).call(this,s("543d")["createPage"])}},[["f91a","common/runtime","common/vendor"]]]);