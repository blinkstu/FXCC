require('../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/goods/goods_return/index"],{"579f":function(t,n,e){"use strict";var r=e("c361"),i=e.n(r);i.a},"63ad":function(t,n,e){"use strict";var r;e.d(n,"b",(function(){return i})),e.d(n,"c",(function(){return u})),e.d(n,"a",(function(){return r}));var i=function(){var t=this,n=t.$createElement,e=(t._self._c,t.$t("￥")),r=t.__map(t.refundCartInfo,(function(n,e){var r=t.__get_orig(n),i=(parseFloat(n.truePrice)+parseFloat(n.postage_price/n.cart_num)).toFixed(2);return{$orig:r,g0:i}})),i=t.$t("退货件数"),u=t.status&&1!==t.status._type?t.$t("退款类型"):null,a=t.$t("退款原因"),s=t.$t("备注说明"),o=t.$t("填写备注信息，100字以内"),d=t.$t("填写备注信息，100字以内"),f=t.$t("上传图片"),c=t.refund_reason_wap_img.length<3?t.$t("上传图片"):null,_=t.$t("申请退款");t.$mp.data=Object.assign({},{$root:{m0:e,l0:r,m1:i,m2:u,m3:a,m4:s,m5:o,m6:d,m7:f,m8:c,m9:_}})},u=[]},aded:function(t,n,e){"use strict";(function(t){e("248d");r(e("66fd"));var n=r(e("d287"));function r(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=e,t(n.default)}).call(this,e("543d")["createPage"])},c361:function(t,n,e){},c604:function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("451d"),i=e("666f"),u=e("26cb"),a=s(e("66ca"));function s(t){return t&&t.__esModule?t:{default:t}}var o=function(){e.e("components/Authorize").then(function(){return resolve(e("b29f"))}.bind(null,e)).catch(e.oe)},d={components:{authorize:o},mixins:[a.default],data:function(){return{id:0,cartIds:[],refund_reason_wap_img:[],status:{},RefundArray:[],refundCartInfo:[],returnGoodsData:[this.$t("仅退款"),this.$t("退货并退款")],refund_total_num:0,index:0,returnGoods:0,orderId:0,refundNumData:[],refund_num_index:0,isRes:!1}},computed:(0,u.mapGetters)(["isLogin"]),watch:{isLogin:{handler:function(t,n){t&&(this.refundGoodsInfo(),this.getRefundReason())},deep:!0}},onLoad:function(t){this.orderId=t.orderId,this.id=t.id,t.cartIds&&(this.cartIds=JSON.parse(t.cartIds)||[]),this.isLogin?(this.refundGoodsInfo(),this.getRefundReason()):(0,i.toLogin)()},methods:{refundGoodsInfo:function(){var t=this;(0,r.postRefundGoods)({id:this.id,cart_ids:this.cartIds}).then((function(n){var e=n.data;t.status=e._status,t.refundCartInfo=e.cartInfo,t.refundCartInfo.forEach((function(n){t.refund_total_num=t.$util.$h.Add(t.refund_total_num,n.cart_num)})),t.refundNumData=Array(t.refund_total_num).fill(0).map((function(t,n){return n+1})),1===t.refundCartInfo.length&&(t.refund_num_index=t.refundNumData.length-1)})).catch((function(n){return t.$util.Tips({title:n})}))},getRefundReason:function(){var t=this;(0,r.ordeRefundReason)().then((function(n){t.$set(t,"RefundArray",n.data)}))},DelPic:function(t){var n=t,e=this;this.refund_reason_wap_img[n];e.refund_reason_wap_img.splice(n,1),e.$set(e,"refund_reason_wap_img",e.refund_reason_wap_img)},uploadpic:function(){var t=this;this.$util.uploadImageOne("upload/image",(function(n){t.refund_reason_wap_img.push(n.data.url),t.$set(t,"refund_reason_wap_img",t.refund_reason_wap_img)}))},subRefund:function(n){var e=this;if(!this.isRes){t.showLoading({title:this.$t("申请中")});var i=this,u=n.detail.value;if(!u.refund_reason_wap_explain)return this.$util.Tips({title:this.$t("请输入备注")});var a=this.refundCartInfo;1===a.length&&(this.cartIds=[{cart_id:a[0].id,cart_num:this.refund_num_index+1}]),this.isRes=!0,(0,r.returnGoodsSubmit)(this.id,{text:i.RefundArray[i.index]||"",refund_reason_wap_explain:u.refund_reason_wap_explain,refund_reason_wap_img:i.refund_reason_wap_img.join(","),refund_type:this.returnGoods?2:1,uni:i.orderId,cart_ids:this.cartIds}).then((function(n){return t.hideLoading(),e.isRes=!1,e.$util.Tips({title:e.$t("申请成功"),icon:"success"},{tab:5,url:"/pages/users/user_return_list/index?isT=1"})})).catch((function(n){return t.hideLoading(),e.isRes=!1,e.$util.Tips({title:n})}))}},bindPickerChange:function(t){this.$set(this,"index",t.detail.value)},returnGoodsChange:function(t){this.$set(this,"returnGoods",t.detail.value)},returnGoodsNum:function(t){this.$set(this,"refund_num_index",Number(t.detail.value))}}};n.default=d}).call(this,e("543d")["default"])},d287:function(t,n,e){"use strict";e.r(n);var r=e("63ad"),i=e("ffa3");for(var u in i)"default"!==u&&function(t){e.d(n,t,(function(){return i[t]}))}(u);e("579f");var a,s=e("f0c5"),o=Object(s["a"])(i["default"],r["b"],r["c"],!1,null,"0eac01ac",null,!1,r["a"],a);n["default"]=o.exports},ffa3:function(t,n,e){"use strict";e.r(n);var r=e("c604"),i=e.n(r);for(var u in r)"default"!==u&&function(t){e.d(n,t,(function(){return r[t]}))}(u);n["default"]=i.a}},[["aded","common/runtime","common/vendor"]]]);